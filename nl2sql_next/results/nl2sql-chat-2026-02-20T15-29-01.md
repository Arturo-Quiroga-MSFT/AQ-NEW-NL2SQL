# NL2SQL Chat — 2026-02-20, 10:29:01 a.m.

## Q: What are the top 5 products by revenue?

```sql
SELECT TOP 5 ProductId, ProductName, Category, Subcategory, Brand, TotalRevenue
FROM dbo.vw_ProductPerformance
ORDER BY TotalRevenue DESC
```

| ProductId | ProductName | Category | Subcategory | Brand | TotalRevenue |
| --- | --- | --- | --- | --- | --- |
| SKU-00467 | NorthPeak Outerwear AK39 | Clothing | Outerwear | NorthPeak | 24378.04 |
| SKU-00431 | PureEssence Fragrance QK17 | Beauty | Fragrance | PureEssence | 18197.49 |
| SKU-00037 | NorthPeak Jean WB45 | Clothing | Jeans | NorthPeak | 15800.08 |
| SKU-00410 | NestCraft Decor MV52 | Home & Kitchen | Decor | NestCraft | 15479.04 |
| SKU-00250 | NorthPeak Jean XU56 | Clothing | Jeans | NorthPeak | 15225.15 |

*5 rows*

## Q: what questions can i ask that will generate charts of different types

# Chart-Friendly Questions for RetailDW

Your RetailDW schema supports a wide variety of chart types for business intelligence and analytics. Here are example questions you can ask, grouped by chart type, with the relevant tables/views to use:

---

## 1. **Time Series (Line/Area Chart)**
Track metrics over time (e.g., by month, year).

- **Monthly sales trend:**  
  _"Show total revenue by month for the last 2 years."_  
  Use: `dbo.vw_MonthlySales`

- **Profit margin over time:**  
  _"How has profit margin changed each month?"_  
  Use: `dbo.vw_MonthlySales`

---

## 2. **Bar/Column Chart**
Compare categories (products, regions, customers, etc.).

- **Top products by units sold:**  
  _"Which products sold the most units?"_  
  Use: `dbo.vw_ProductPerformance`

- **Sales by region:**  
  _"Show total revenue by region."_  
  Use: `dbo.vw_CustomerLifetimeValue` (aggregate by `Region`)

- **Orders by store:**  
  _"Which stores have the highest order counts?"_  
  Join `fact.FactOrders` with `dim.DimStore`

---

## 3. **Pie/Donut Chart**
Show proportions of a whole.

- **Sales by product category:**  
  _"What percentage of total revenue comes from each product category?"_  
  Use: `dbo.vw_ProductPerformance` (aggregate by `Category`)

- **Order status breakdown:**  
  _"What is the distribution of order statuses?"_  
  Use: `fact.FactOrders.OrderStatus`

---

## 4. **Stacked Bar/Column Chart**
Compare parts of categories.

- **Revenue by category and brand:**  
  _"Show revenue by product category, broken down by brand."_  
  Use: `dbo.vw_ProductPerformance`

- **Returns by reason and product category:**  
  _"How many returns for each reason, by product category?"_  
  Join `fact.FactReturns`, `ref.RefReturnReason`, `dim.DimProduct`

---

## 5. **Scatter Plot**
Show correlation between two metrics.

- **Order value vs. profit:**  
  _"Is there a relationship between order value and profit?"_  
  Use: `fact.FactOrders.LineTotal`, `fact.FactOrders.LineProfit`

- **Product rating vs. units sold:**  
  _"Do higher-rated products sell more units?"_  
  Use: `dbo.vw_ProductPerformance.AvgRating`, `TotalUnitsSold`

---

## 6. **Histogram**
Show distribution of a metric.

- **Order value distribution:**  
  _"What is the distribution of order values?"_  
  Use: `fact.FactOrders.LineTotal`

- **Customer tenure distribution:**  
  _"How long have customers been with us?"_  
  Use: `dbo.vw_CustomerLifetimeValue.CustomerTenureDays`

---

## 7. **Heatmap**
Show intensity across two dimensions.

- **Sales by month and region:**  
  _"Show total revenue by month and region."_  
  Join `dbo.vw_MonthlySales` with region info from `dim.DimCustomer`

---

## 8. **Funnel Chart**
Show conversion rates.

- **Web traffic conversion:**  
  _"What percentage of sessions convert to orders?"_  
  Use: `fact.FactWebTraffic.ConvertedFlag`

---

## 9. **Gauge/KPI**
Show progress toward a goal.

- **Current inventory vs. reorder point:**  
  _"How does current inventory compare to reorder points for each product?"_  
  Use: `fact.FactInventory.QuantityOnHand`, `ReorderPoint`

---

# Example Chart Questions

- "Show total profit by product category as a bar chart."
- "Plot monthly order count as a line chart."
- "Display the distribution of customer age groups as a pie chart."
- "Show a scatter plot of average product rating vs. total units sold."
- "Visualize the number of returns by reason as a stacked bar chart."
- "Show a histogram of order values."
- "Display a heatmap of sales by month and region."
- "Show a funnel of web sessions to conversions."

---

**Tip:**  
When asking for a chart, specify the metric, the dimension(s), and the time frame (if relevant).  
_Example: "Show total revenue by store for 2023 as a column chart."_

Let me know which chart type or business question you want to explore, and I’ll generate the SQL!
