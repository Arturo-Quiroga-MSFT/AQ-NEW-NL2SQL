# NL2SQL Chat — 2026-02-20, 11:15:31 a.m.

## Q: What tables are in the database?

The database contains the following tables:

**Dimension Tables (dim):**
- dim.DimCustomer
- dim.DimDate
- dim.DimPaymentMethod
- dim.DimProduct
- dim.DimPromotion
- dim.DimShippingMethod
- dim.DimStore

**Fact Tables (fact):**
- fact.FactCustomerReview
- fact.FactInventory
- fact.FactOrders
- fact.FactReturns
- fact.FactWebTraffic

**Reference Table (ref):**
- ref.RefReturnReason

**Summary:**  
There are 13 tables in total, organized by schema:  
- 7 dimension tables  
- 5 fact tables  
- 1 reference table

## Q: Describe the FactOrders table — what columns and foreign keys does  it have?

Here’s a detailed description of the **fact.FactOrders** table:

---

### Columns

| Column Name         | Data Type      | Description / Notes                |
|---------------------|---------------|------------------------------------|
| OrderLineKey        | int           | Primary Key                        |
| OrderId             | varchar       | Order identifier                   |
| LineNumber          | int           | Line item number                   |
| CustomerKey         | int           | Foreign Key → dim.DimCustomer      |
| ProductKey          | int           | Foreign Key → dim.DimProduct       |
| OrderDateKey        | int           | Foreign Key → dim.DimDate          |
| ShipDateKey         | int           | Foreign Key → dim.DimDate          |
| StoreKey            | int           | Foreign Key → dim.DimStore         |
| PromotionKey        | int           | Foreign Key → dim.DimPromotion     |
| ShippingMethodKey   | int           | Foreign Key → dim.DimShippingMethod|
| PaymentMethodKey    | int           | Foreign Key → dim.DimPaymentMethod |
| Quantity            | int           | Quantity ordered                   |
| UnitPrice           | decimal       | Price per unit                     |
| UnitCost            | decimal       | Cost per unit                      |
| DiscountAmount      | decimal       | Discount applied                   |
| ShippingCost        | decimal       | Shipping cost                      |
| TaxAmount           | decimal       | Tax amount                         |
| LineTotal           | decimal       | Total for line item                |
| LineCost            | decimal       | Cost for line item                 |
| LineProfit          | decimal       | Profit for line item               |
| OrderStatus         | varchar       | Status of the order                |
| IsReturned          | bit           | If item was returned               |
| CreatedDate         | datetime2     | Record creation timestamp          |

---

### Foreign Key Relationships

- **CustomerKey** → dim.DimCustomer.CustomerKey
- **ProductKey** → dim.DimProduct.ProductKey
- **OrderDateKey** → dim.DimDate.DateKey
- **ShipDateKey** → dim.DimDate.DateKey
- **StoreKey** → dim.DimStore.StoreKey
- **PromotionKey** → dim.DimPromotion.PromotionKey
- **ShippingMethodKey** → dim.DimShippingMethod.ShippingMethodKey
- **PaymentMethodKey** → dim.DimPaymentMethod.PaymentMethodKey

---

**Summary:**  
fact.FactOrders is the central fact table for order line items, capturing detailed sales transactions. It links to all major dimensions (customer, product, date, store, promotion, shipping, payment) and tracks quantities, pricing, discounts, costs, profits, and order status.

## Q: How many customers are in each membership tier?

```sql
SELECT MembershipTier, COUNT(DISTINCT CustomerKey) AS CustomerCount
FROM dim.DimCustomer
GROUP BY MembershipTier
ORDER BY CustomerCount DESC
```

| MembershipTier | CustomerCount |
| --- | --- |
| Bronze | 1481 |
| Silver | 893 |
| Gold | 469 |
| Platinum | 157 |

*4 rows*

## Q: How are orders related to products?

**Error:** name 'TOOLS_READ_ONLY' is not defined
