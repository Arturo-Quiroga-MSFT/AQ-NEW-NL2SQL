# NL2SQL Chat — 2026-02-20, 10:36:24 a.m.

## Q: What are the top 5 products by revenue?

```sql
SELECT TOP 5 ProductId, ProductName, Category, Subcategory, Brand, TotalRevenue
FROM dbo.vw_ProductPerformance
ORDER BY TotalRevenue DESC
```

| ProductId | ProductName | Category | Subcategory | Brand | TotalRevenue |
| --- | --- | --- | --- | --- | --- |
| SKU-00467 | NorthPeak Outerwear AK39 | Clothing | Outerwear | NorthPeak | 24378.04 |
| SKU-00431 | PureEssence Fragrance QK17 | Beauty | Fragrance | PureEssence | 18197.49 |
| SKU-00037 | NorthPeak Jean WB45 | Clothing | Jeans | NorthPeak | 15800.08 |
| SKU-00410 | NestCraft Decor MV52 | Home & Kitchen | Decor | NestCraft | 15479.04 |
| SKU-00250 | NorthPeak Jean XU56 | Clothing | Jeans | NorthPeak | 15225.15 |

*5 rows*

## Q: what questions can i ask that will generate charts of different types

# Chart-Friendly Questions for RetailDW

Your RetailDW schema supports a wide variety of chart types for business intelligence and analytics. Here are example questions you can ask, grouped by chart type, with the relevant tables/views to use:

---

## 1. **Time Series (Line/Area Chart)**
Track metrics over time (e.g., by month, year).

- **Monthly sales trend:**  
  _"Show total revenue by month for the last 2 years."_  
  Use: `dbo.vw_MonthlySales`

- **Profit margin over time:**  
  _"How has profit margin changed each month?"_  
  Use: `dbo.vw_MonthlySales`

---

## 2. **Bar/Column Chart**
Compare categories (products, regions, customers, etc.).

- **Top products by units sold:**  
  _"Which products sold the most units?"_  
  Use: `dbo.vw_ProductPerformance`

- **Sales by region:**  
  _"Show total revenue by region."_  
  Use: `dbo.vw_CustomerLifetimeValue` (aggregate by `Region`)

- **Orders by store:**  
  _"Which stores have the highest order counts?"_  
  Join `fact.FactOrders` with `dim.DimStore`

---

## 3. **Pie/Donut Chart**
Show proportions of a whole.

- **Sales by product category:**  
  _"What percentage of total revenue comes from each product category?"_  
  Use: `dbo.vw_ProductPerformance` (aggregate by `Category`)

- **Order status breakdown:**  
  _"What is the distribution of order statuses?"_  
  Use: `fact.FactOrders.OrderStatus`

---

## 4. **Stacked Bar/Column Chart**
Compare parts of categories.

- **Revenue by category and brand:**  
  _"Show revenue by product category, broken down by brand."_  
  Use: `dbo.vw_ProductPerformance`

- **Returns by reason and product category:**  
  _"How many returns for each reason, by product category?"_  
  Join `fact.FactReturns`, `ref.RefReturnReason`, `dim.DimProduct`

---

## 5. **Scatter Plot**
Show correlation between two metrics.

- **Order value vs. profit:**  
  _"Is there a relationship between order value and profit?"_  
  Use: `fact.FactOrders.LineTotal`, `fact.FactOrders.LineProfit`

- **Product rating vs. units sold:**  
  _"Do higher-rated products sell more units?"_  
  Use: `dbo.vw_ProductPerformance.AvgRating`, `TotalUnitsSold`

---

## 6. **Histogram**
Show distribution of a metric.

- **Order value distribution:**  
  _"What is the distribution of order values?"_  
  Use: `fact.FactOrders.LineTotal`

- **Customer tenure distribution:**  
  _"How long have customers been with us?"_  
  Use: `dbo.vw_CustomerLifetimeValue.CustomerTenureDays`

---

## 7. **Heatmap**
Show intensity across two dimensions.

- **Sales by month and region:**  
  _"Show total revenue by month and region."_  
  Join `dbo.vw_MonthlySales` with region info from `dim.DimCustomer`

---

## 8. **Funnel Chart**
Show conversion rates.

- **Web traffic conversion:**  
  _"What percentage of sessions convert to orders?"_  
  Use: `fact.FactWebTraffic.ConvertedFlag`

---

## 9. **Gauge/KPI**
Show progress toward a goal.

- **Current inventory vs. reorder point:**  
  _"How does current inventory compare to reorder points for each product?"_  
  Use: `fact.FactInventory.QuantityOnHand`, `ReorderPoint`

---

# Example Chart Questions

- "Show total profit by product category as a bar chart."
- "Plot monthly order count as a line chart."
- "Display the distribution of customer age groups as a pie chart."
- "Show a scatter plot of average product rating vs. total units sold."
- "Visualize the number of returns by reason as a stacked bar chart."
- "Show a histogram of order values."
- "Display a heatmap of sales by month and region."
- "Show a funnel of web sessions to conversions."

---

**Tip:**  
When asking for a chart, specify the metric, the dimension(s), and the time frame (if relevant).  
_Example: "Show total revenue by store for 2023 as a column chart."_

Let me know which chart type or business question you want to explore, and I’ll generate the SQL!

## Q: Show a scatter plot of average product rating vs. total units sold.

```sql
SELECT TOP 50 ProductId, ProductName, AvgRating, TotalUnitsSold
FROM dbo.vw_ProductPerformance
ORDER BY AvgRating DESC, TotalUnitsSold DESC
```

| ProductId | ProductName | AvgRating | TotalUnitsSold |
| --- | --- | --- | --- |
| SKU-00036 | ClassicStitch Activewear HU69 | 5 | 34 |
| SKU-00261 | FunWorld Action Figure QE43 | 5 | 32 |
| SKU-00286 | Rainbow Reads Children FI90 | 5 | 30 |
| SKU-00101 | FunWorld Board Game LJ86 | 5 | 26 |
| SKU-00061 | PureEssence Fragrance OH07 | 5 | 25 |
| SKU-00069 | FreshHarvest Organic MC95 | 5 | 24 |
| SKU-00207 | WaveRider Cycling CU26 | 5 | 24 |
| SKU-00329 | PixelCore Tablet XZ87 | 5 | 24 |
| SKU-00149 | FunWorld Puzzle OZ21 | 5 | 22 |
| SKU-00180 | PureEssence Fragrance VH03 | 5 | 22 |
| SKU-00296 | ClearView Smartphone NA13 | 5 | 22 |
| SKU-00425 | FreshHarvest Snack NT01 | 5 | 22 |
| SKU-00414 | ClassicStitch Jean HJ44 | 5 | 20 |
| SKU-00113 | EcoWear Jean RM18 | 5 | 19 |
| SKU-00346 | PlayZone Board Game ZI13 | 5 | 18 |
| SKU-00474 | ComfortPlus Decor YX29 | 5 | 18 |
| SKU-00001 | ClearView Headphone QF19 | 5 | 17 |
| SKU-00110 | ClassicStitch Jean FI35 | 5 | 17 |
| SKU-00118 | Kinetic Cycling ZN59 | 5 | 17 |
| SKU-00263 | VoltEdge Headphone GV57 | 5 | 17 |
| SKU-00497 | NorthPeak Mens Shirt BY39 | 5 | 17 |
| SKU-00317 | PageTurn Press Textbook SE54 | 5 | 16 |
| SKU-00368 | StarToy Action Figure VF60 | 5 | 16 |
| SKU-00002 | EcoWear Outerwear MR83 | 5 | 15 |
| SKU-00343 | HavenHome Cookware OT70 | 5 | 14 |
| SKU-00350 | PureEssence Haircare IL60 | 5 | 12 |
| SKU-00115 | PureEssence Haircare IF65 | 5 | 11 |
| SKU-00153 | SnackBox Snack VA91 | 5 | 11 |
| SKU-00195 | GreenPantry Beverage PX32 | 5 | 11 |
| SKU-00459 | Scholar House Non-Fiction AR97 | 5 | 11 |
| SKU-00240 | PureSpace Furniture VZ44 | 5 | 10 |
| SKU-00423 | SnackBox Pantry Staple UL03 | 5 | 10 |
| SKU-00495 | ChefLine Cookware NA35 | 5 | 10 |
| SKU-00056 | PureSpace Bedding RS44 | 5 | 9 |
| SKU-00098 | Insight Books Non-Fiction AU33 | 5 | 8 |
| SKU-00233 | PlayZone Action Figure CV56 | 5 | 8 |
| SKU-00040 | VelvetSkin Fragrance YJ42 | 5 | 7 |
| SKU-00436 | FlexForm Running BJ12 | 5 | 7 |
| SKU-00045 | FlexForm Cycling YE48 | 5 | 6 |
| SKU-00285 | PureEssence Skincare KY67 | 5 | 6 |
| SKU-00303 | ChefLine Furniture DR00 | 5 | 6 |
| SKU-00351 | ComfortPlus Furniture JT90 | 5 | 5 |
| SKU-00484 | StarToy Board Game XQ22 | 4 | 44 |
| SKU-00060 | UrbanThread Jean ET61 | 4 | 42 |
| SKU-00130 | AuraBlend Haircare JE85 | 4 | 42 |
| SKU-00485 | BrainSpark Video Game AY03 | 4 | 38 |
| SKU-00064 | PixelCore Smartphone ZC63 | 4 | 36 |
| SKU-00231 | ClassicStitch Jean NK64 | 4 | 34 |
| SKU-00150 | GlowLab Makeup PY62 | 4 | 30 |
| SKU-00430 | BrainSpark Puzzle ZA95 | 4 | 28 |

*50 rows*

## Q: Visualize the number of returns by reason as a stacked bar chart.

```sql
SELECT rr.ReasonName, COUNT(r.ReturnKey) AS ReturnCount
FROM fact.FactReturns r
JOIN ref.RefReturnReason rr ON r.ReturnReasonKey = rr.ReturnReasonKey
GROUP BY rr.ReasonName
ORDER BY ReturnCount DESC
```

| ReasonName | ReturnCount |
| --- | --- |
| Received Wrong Item | 19 |
| Quality Below Expectations | 16 |
| Changed Mind | 14 |
| Found Better Price Elsewhere | 13 |
| Not as Described | 13 |
| Arrived Too Late | 11 |
| Wrong Size or Fit | 11 |
| Product Defective or Damaged | 6 |

*8 rows*

## Q: What percentage of sessions convert to orders?

```sql
SELECT 
    CAST(SUM(CASE WHEN ConvertedFlag = 1 THEN 1 ELSE 0 END) * 100.0 / COUNT(*) AS DECIMAL(5,2)) AS ConversionRatePct
FROM fact.FactWebTraffic
ORDER BY ConversionRatePct DESC
```

| ConversionRatePct |
| --- |
| 15.2 |

*1 row*

## Q: Show revenue by product category, broken down by brand.

```sql
SELECT Category, Brand, SUM(TotalRevenue) AS Revenue
FROM dbo.vw_ProductPerformance
GROUP BY Category, Brand
ORDER BY Category, Revenue DESC
```

| Category | Brand | Revenue |
| --- | --- | --- |
| Beauty | PureEssence | 104310.34 |
| Beauty | GlowLab | 84958.93 |
| Beauty | AuraBlend | 46414.38 |
| Beauty | VelvetSkin | 28089.03 |
| Books | Insight Books | 96803.05 |
| Books | Rainbow Reads | 63970.02 |
| Books | PageTurn Press | 61164.77 |
| Books | Scholar House | 40238.72 |
| Clothing | NorthPeak | 86629.27 |
| Clothing | ClassicStitch | 79505.71 |
| Clothing | UrbanThread | 58750.81 |
| Clothing | FitFlex | 53238.52 |
| Clothing | EcoWear | 34489.16 |
| Electronics | PixelCore | 123875.95 |
| Electronics | VoltEdge | 51654.47 |
| Electronics | SoundWave | 41499.97 |
| Electronics | TechNova | 39217.52 |
| Electronics | ClearView | 37493.78 |
| Grocery | NaturesBest | 61046.29 |
| Grocery | SnackBox | 54150.52 |
| Grocery | FreshHarvest | 50372.77 |
| Grocery | GreenPantry | 28282.56 |
| Home & Kitchen | HavenHome | 63128.15 |
| Home & Kitchen | PureSpace | 57404.58 |
| Home & Kitchen | NestCraft | 52410.45 |
| Home & Kitchen | ChefLine | 43713.72 |
| Home & Kitchen | ComfortPlus | 30081.14 |
| Sports & Outdoors | Kinetic | 42755.46 |
| Sports & Outdoors | WaveRider | 42021.58 |
| Sports & Outdoors | FlexForm | 40018.83 |
| Sports & Outdoors | SummitGear | 35335.17 |
| Sports & Outdoors | TrailBoss | 20728.75 |
| Toys & Games | BrainSpark | 87350.57 |
| Toys & Games | PlayZone | 63454.67 |
| Toys & Games | FunWorld | 58041.61 |
| Toys & Games | StarToy | 53059.35 |

*36 rows*

## Q: Show total revenue by month for the last 2 years, put this in a chart

```sql
SELECT Year, Month, MonthName, TotalRevenue
FROM dbo.vw_MonthlySales
WHERE Year >= YEAR(GETDATE()) - 1
ORDER BY Year, Month
```

| Year | Month | MonthName | TotalRevenue |
| --- | --- | --- | --- |
| 2025 | 1 | January | 32966.83 |
| 2025 | 2 | February | 32387.61 |
| 2025 | 3 | March | 42430.1 |
| 2025 | 4 | April | 29035.52 |
| 2025 | 5 | May | 27389.93 |
| 2025 | 6 | June | 24669.77 |
| 2025 | 7 | July | 29691.96 |
| 2025 | 8 | August | 24946.67 |
| 2025 | 9 | September | 26942.65 |
| 2025 | 10 | October | 20480.85 |
| 2025 | 11 | November | 31086.4 |
| 2025 | 12 | December | 18976.6 |

*12 rows*

## Q: Show total revenue by month for the last 2 years, put this in a chart

```sql
WITH Monthly AS (
    SELECT
        Year,
        Month,
        MonthName,
        TotalRevenue,
        DATEFROMPARTS(Year, Month, 1) AS MonthStart
    FROM dbo.vw_MonthlySales
)
SELECT TOP 50
    Year,
    Month,
    MonthName,
    TotalRevenue
FROM Monthly
WHERE MonthStart >= DATEADD(YEAR, -2, DATEFROMPARTS(YEAR(GETDATE()), MONTH(GETDATE()), 1))
  AND MonthStart <= DATEFROMPARTS(YEAR(GETDATE()), MONTH(GETDATE()), 1)
ORDER BY Year, Month;
```

| Year | Month | MonthName | TotalRevenue |
| --- | --- | --- | --- |
| 2024 | 2 | February | 19051.33 |
| 2024 | 3 | March | 16926.46 |
| 2024 | 4 | April | 27761.36 |
| 2024 | 5 | May | 24229.14 |
| 2024 | 6 | June | 18597.48 |
| 2024 | 7 | July | 24749.1 |
| 2024 | 8 | August | 26588.75 |
| 2024 | 9 | September | 25258.57 |
| 2024 | 10 | October | 26935.1 |
| 2024 | 11 | November | 29781.76 |
| 2024 | 12 | December | 20133.82 |
| 2025 | 1 | January | 32966.83 |
| 2025 | 2 | February | 32387.61 |
| 2025 | 3 | March | 42430.1 |
| 2025 | 4 | April | 29035.52 |
| 2025 | 5 | May | 27389.93 |
| 2025 | 6 | June | 24669.77 |
| 2025 | 7 | July | 29691.96 |
| 2025 | 8 | August | 24946.67 |
| 2025 | 9 | September | 26942.65 |
| 2025 | 10 | October | 20480.85 |
| 2025 | 11 | November | 31086.4 |
| 2025 | 12 | December | 18976.6 |

*23 rows*

## Q: Show total revenue by month for the last 2 years, put this in a bar chart

```sql
WITH Monthly AS (
    SELECT
        Year,
        Month,
        MonthName,
        TotalRevenue,
        DATEFROMPARTS(Year, Month, 1) AS MonthStart
    FROM dbo.vw_MonthlySales
)
SELECT TOP 50
    Year,
    Month,
    MonthName,
    TotalRevenue
FROM Monthly
WHERE MonthStart >= DATEADD(YEAR, -2, DATEFROMPARTS(YEAR(GETDATE()), MONTH(GETDATE()), 1))
  AND MonthStart <= DATEFROMPARTS(YEAR(GETDATE()), MONTH(GETDATE()), 1)
ORDER BY Year, Month;
```

| Year | Month | MonthName | TotalRevenue |
| --- | --- | --- | --- |
| 2024 | 2 | February | 19051.33 |
| 2024 | 3 | March | 16926.46 |
| 2024 | 4 | April | 27761.36 |
| 2024 | 5 | May | 24229.14 |
| 2024 | 6 | June | 18597.48 |
| 2024 | 7 | July | 24749.1 |
| 2024 | 8 | August | 26588.75 |
| 2024 | 9 | September | 25258.57 |
| 2024 | 10 | October | 26935.1 |
| 2024 | 11 | November | 29781.76 |
| 2024 | 12 | December | 20133.82 |
| 2025 | 1 | January | 32966.83 |
| 2025 | 2 | February | 32387.61 |
| 2025 | 3 | March | 42430.1 |
| 2025 | 4 | April | 29035.52 |
| 2025 | 5 | May | 27389.93 |
| 2025 | 6 | June | 24669.77 |
| 2025 | 7 | July | 29691.96 |
| 2025 | 8 | August | 24946.67 |
| 2025 | 9 | September | 26942.65 |
| 2025 | 10 | October | 20480.85 |
| 2025 | 11 | November | 31086.4 |
| 2025 | 12 | December | 18976.6 |

*23 rows*
