version: 1
warehouse: contoso_finance
entities:
  dimensions:
    - name: dim_company
      surrogate_key: company_key
      natural_key: company_id
      columns:
        - name: company_id
          type: VARCHAR(50)
          nullable: false
        - name: region
          type: VARCHAR(40)
          nullable: false
        - name: industry
          type: VARCHAR(60)
          nullable: true
    - name: dim_date
      surrogate_key: date_key
      columns:
        - name: date_key
          type: INT
          nullable: false
        - name: calendar_date
          type: DATE
          nullable: false
  facts:
    - name: fact_loan_payments
      grain: "loan_id, date_key"
      columns:
        - name: loan_id
          type: VARCHAR(50)
          nullable: false
        - name: company_key
          type: INT
          nullable: false
        - name: date_key
          type: INT
          nullable: false
      foreign_keys:
        - column: company_key
          references: dim_company(company_key)
        - column: date_key
          references: dim_date(date_key)
      measures:
        - name: principal_paid
          type: DECIMAL(18,2)
          nullable: false
        - name: interest_paid
          type: DECIMAL(18,2)
          nullable: false
