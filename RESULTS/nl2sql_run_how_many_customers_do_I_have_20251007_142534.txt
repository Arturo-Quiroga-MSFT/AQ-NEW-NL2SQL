
========== NATURAL LANGUAGE QUERY ==========
how many customers do I have

========== INTENT & ENTITIES ==========
{
  "intent": "aggregate_count",
  "entity": "customers",
  "metrics": [
    {
      "name": "customer_count",
      "function": "count",
      "field": "*"
    }
  ],
  "filters": [],
  "group_by": []
}

========== SQL GENERATION REASONING ==========
- Entities mapping: “customers” interpreted as companies → dbo.Company
- Tables/Joins: Single table (dbo.Company); no joins needed
- Aggregations: COUNT(DISTINCT CompanyId) as customer_count to avoid duplicates
- Filters: None specified; return overall count
- Order/Limit: None; single scalar result
- Assumptions: Counting all companies in dbo.Company (not restricted to loan portfolio). If the intent is to count customers with loans only, use dbo.vw_LoanPortfolio and count distinct CompanyName or CompanyId from that view.

========== GENERATED SQL (RAW) ==========
SELECT COUNT(*) AS customer_count
FROM dbo.Company

========== SQL QUERY RESULTS (TABLE) ==========
customer_count
--------------
15            

========== TOKEN USAGE & COST ==========
Input tokens: 2752
Completion tokens: 1561
Total tokens: 4313
Estimated cost (USD): 0.019050  [input=0.003440, output=0.015610; per-1k: in=0.00125, out=0.01; source=file:azure_openai_pricing.json]

========== RUN DURATION ==========
Run duration: 79.16 seconds
